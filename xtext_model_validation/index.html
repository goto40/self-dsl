<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Model Validation - self-dsl</title>
  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Model Validation";
    var mkdocs_page_input_path = "xtext_model_validation.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> self-dsl</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Welcome to self-dsl</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../motivation/">Motivation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../basics/">Basics of meta modeling for domain models</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Xtext</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../xtext_eclipse/">Eclipse</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_project_setup/">Xtext Project Setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_a_first_grammar/">A First Grammar</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_code_generation_xtend/">Code Generation (with Xtend)</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Model Validation</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#model-validation">Model </a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#validation-example">Validation Example</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_xtend/">Xtend: Selected Aspects</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_scoping/">Scoping</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_modularization/">Modularization</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_deploy_command_line/">Deploy a command line version</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_deploy_plugin/">Deploy an eclispe plugin</a>
                </li>
                <li class="">
                    
    <a class="" href="../xtext_howtos/">Xtext HOWTOs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">TextX</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../textx_intro/">TextX Intro</a>
                </li>
                <li class="">
                    
    <a class="" href="../textx_project_setup/">TextX Project Setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../textx_by_examples/">TextX by Examples</a>
                </li>
                <li class="">
                    
    <a class="" href="../textx_modularization/">TextX Modularization</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../references/">References</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">self-dsl</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Xtext &raquo;</li>
        
      
    
    <li>Model Validation</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="model-validation">Model <a name="xtext_validation"></a> Validation</h1>
<p>A model can be validated according certain validation rules.
These rules have to be define by the meta modeller
in the meta model. Error and warning messages can be reported
and attached to model elements or text location. These
messages are displayed in the Eclipse model text editor.
More Information, see <a href="../references/#mooji2017a">(Mooij et al, 2017a)</a>.</p>
<p><a href="../references/#rentzReichert2017">(Rentz-Reichert, 2017)</a>
suggested to put as little as possible semantics into
the grammar (e.g. "+" instead of "*") and to add this 
semantics to the validation code. This often allows
to generate more meaningful domain errors.</p>
<p>A good introduction can be found here:
<a href="../references/#xtext15minext">(Xtext 15 Minutes Tutorial, Extended)</a>, in the section 
"Creating Custom Validation Rules".</p>
<h2 id="validation-example">Validation Example</h2>
<p>Open the *Validator.xtend" file (automatically generated for
a new project), e.g., 
"kurs.xtext.dataflow.validation.DataFlowDslValidator.xtend".
Activate the commented code and modify it:</p>
<div class="codehilite"><pre><span></span><span class="kn">package</span> <span class="n">kurs</span><span class="o">.</span><span class="n">xtext</span><span class="o">.</span><span class="n">dataflow</span><span class="o">.</span><span class="n">validation</span>

<span class="kn">import</span> <span class="nn">org.eclipse.xtext.validation.Check</span>
<span class="kn">import</span> <span class="nn">kurs.xtext.dataflow.dataFlowDsl.KComponent</span>
<span class="kn">import</span> <span class="nn">kurs.xtext.dataflow.dataFlowDsl.DataFlowDslPackage</span>

<span class="kd">class</span> <span class="nc">DataFlowDslValidator</span> <span class="kd">extends</span> <span class="n">AbstractDataFlowDslValidator</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">val</span> <span class="n">INVALID_NAME</span> <span class="o">=</span> <span class="s">&#39;invalidName&#39;</span>

    <span class="nd">@Check</span>
    <span class="kd">def</span> <span class="nf">checkGreetingStartsWithCapital</span><span class="o">(</span><span class="n">Entity</span> <span class="n">obj</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(!</span><span class="n">Character</span><span class="o">.</span><span class="n">isUpperCase</span><span class="o">(</span><span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">charAt</span><span class="o">(</span><span class="mi">0</span><span class="o">)))</span> <span class="o">{</span>
            <span class="n">warning</span><span class="o">(</span><span class="s">&#39;Name should start with a capital&#39;</span><span class="o">,</span> 
                    <span class="n">DomainmodelPackage</span><span class="o">.</span><span class="n">Literals</span><span class="o">.</span><span class="n">TYPE__NAME</span><span class="o">,</span>
                    <span class="n">INVALID_NAME</span><span class="o">)</span>
        <span class="o">}</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></div>


<p>Try your validator for your language in the Eclipse Runtime model editor.
<img alt="validation" src="../images/xtext_validation.png" title="validation" /></p>
<p>Notes:</p>
<ul>
<li>A validation rule is marked as such with the annotation "@Check". 
     The argument is a model element of the type to be checked.</li>
<li>The rule is checked during typing in the editor 
     (@Check allows to control if a rule is checked during 
     typing, when saving, or upon explicit request
     (see: org.eclipse.xtext.validation.CheckType; 
     press "F3" when having the cursor on @Check)</li>
<li>The rule above checks elements of type "Entity". 
     Errors/warning, if present, are attached to this model element.</li>
<li>A rule can generate "errors", "warnings" und "infos".
     The ID (in our case "INVALID_NAME") allows a rule to 
     be identified later, e.g., when
     implementing HotFixes for specific validation violations.</li>
<li>Why did we use "TYPE_NAME" instead of ENTITY_NAME? (Hint: ENTITY_NAME does
     not exist; How are Type and Entity related to each other?)</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../xtext_xtend/" class="btn btn-neutral float-right" title="Xtend: Selected Aspects">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../xtext_code_generation_xtend/" class="btn btn-neutral" title="Code Generation (with Xtend)"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../xtext_code_generation_xtend/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../xtext_xtend/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>

</body>
</html>
